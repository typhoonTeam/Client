<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Merchant</title>
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.css">
    <!--<link rel="stylesheet" href="../css/carrie_style.css">-->
    <script src="../node_modules/jquery/dist/jquery.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.js"></script>
    <script src="../js/util.js"></script>
</head>
<body>
<div class="container">
    <h1><strong><p class="text-center">订单详情</p></strong></h1>
    <table id="orderList" class="table table-hover table-striped">
        <tr id="head">
            <td>菜名</td>
            <td>价格</td>
            <td>图片</td>
            <td>简介</td>
            <td>店铺</td>
            <td>数量</td>
        </tr>
    </table>
</div>


<script>

    let userId=sessionStorage.getItem("user");

    let shopId = GetRequest().shop_id;
    function GetRequest() {
        var url = location.search; //获取url中"?"符后的字串
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }

    window.onload=function () {

        function renderDetail(foods) {
            let table=document.querySelector("#orderList");
            for(let i=0;i<foods.length;i++){
                let tr=$("<tr>");
                $("<td>").text(foods[i].foodName).appendTo(tr);
                $("<td>").text(foods[i].price).appendTo(tr);
                $("<td>").text(foods[i].picture).appendTo(tr);
                $("<td>").text(foods[i].info).appendTo(tr);
                $("<td>").text(foods[i].shopId).appendTo(tr);
                $("<td>").text(foods[i].num).appendTo(tr);

                tr.addClass("").appendTo(table);
            }
        }
        ///////////////////////////////////////////
        function getData(userId,shopId){
        	console.log(userId+shopId);
            let foods=$1.queryUserCart(userId,shopId);
       
            renderDetail(foods);
        }
        //////////////////////////////////////////

        getData(userId,shopId);


    }
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.css">
    <script src="../node_modules/jquery/dist/jquery.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.js"></script>
<<<<<<< HEAD
    <link rel="stylesheet" href="../css/carrie_style.css">
    <style>
=======
    <style>
        body{
            background-color: #ff7d52;
        }
        .body{
            width: 1000px;
            height: 1200px;
            margin: 0px auto;
            background-color: white;
        }
        #header{
            width: 500px;
            background-color: gold;
            border: 3px solid gold;

        }
>>>>>>> b42136fd6670c8b70aa3ed0af8ef07ca2d8075b2
        #ad{
            width: 800px;
            margin: 0px auto;
        }
        #merchant{
            margin: 0px auto;
<<<<<<< HEAD
            width: 200px;
            height: 240px;
=======
            /*background-color: gold;*/
            width: 200px;
            height: 240px;

>>>>>>> b42136fd6670c8b70aa3ed0af8ef07ca2d8075b2
        }
        .merchantImg{
            text-align: center;
        }
        .merchantDetail{
            font-size: 15px;
            font-weight: 600;
            color: gold;
        }
        .segmentation{
            margin: 0px auto;
            font-size: 20px;
            font-weight: 600;
            text-align: center;
<<<<<<< HEAD
            color: #ffa23b;
=======
            color: gold;
>>>>>>> b42136fd6670c8b70aa3ed0af8ef07ca2d8075b2
        }
    </style>

</head>
<body>
<<<<<<< HEAD
<div class="carrie_body">
    <br>
    <div id="carrie_header">
=======
<div class="body">
    <br>
    <div id="header">
>>>>>>> b42136fd6670c8b70aa3ed0af8ef07ca2d8075b2
        <ul class="nav nav-tabs nav-justified">
            <li class="active"><a href="##">主页</a></li>
            <li><a href="##">登录</a></li>
            <li><a href="##">购物车</a></li>
            <li><a href="##">订单</a></li>
            <li><a href="##">我的</a></li>
        </ul>
    </div>
    <br>
    <br>

<<<<<<< HEAD
    <div id="content">
=======
    <div id="navContent">
>>>>>>> b42136fd6670c8b70aa3ed0af8ef07ca2d8075b2
        <!-- start advertisement-->
        <div id="ad">
            <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                <!-- Indicators -->
                <ol class="carousel-indicators">
                    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                </ol>
                <!-- Wrapper for slides -->
                <div class="carousel-inner" role="listbox">
                    <div class="item active">
                        <a href="http://www.baidu.com"><img src="../image/1.jpg" alt="image1" class="images"></a>
                    </div>
                    <div class="item">
                        <img src="../image/2.jpg" alt="image2" class="images">
                    </div>
                    <div class="item">
                        <img src="../image/3.jpg" alt="image3" class="images">
                    </div>
                </div>
                <!-- Controls -->
                <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
        <!-- end advertisement-->

        <br>
        <br>
        <br>
        <div class="segmentation">
            ************商家列表************
        </div>
        <br>

        <div id="merchants">
            <div class="row">
<<<<<<< HEAD
               
=======

>>>>>>> b42136fd6670c8b70aa3ed0af8ef07ca2d8075b2
            </div>

        </div>
    </div>
<<<<<<< HEAD

</div>
</body>
<script>
let currentPage = 0;
let pageSize = 8;
window.onload=function () {
    let url="http://localhost:9090/typhoon_consuemer/showRestaurants";
    let method="POST";
    let headers=[{"key":"Content-Type","value":"application/json"}];
    function renderTable(merchants) {
        let maindiv=document.querySelector("#merchants");
        for(let i=0;i<merchants.length;i++){
        	
            let colDiv='<a href="/typhoon_consuemer/customer/html/merchantFood.html?shop_id='+merchants[i].shopId+'"><div class="col-md-3"><div id="merchant"><br><br> <div class="merchantImg">' +
                ' <img src="'+merchants[i].picture+'" alt="" width="180" height="100">' +
                '</div><br><div class="merchantDetail">' +
                ' &nbsp;&nbsp;'+merchants[i].shopName+'<br> &nbsp;&nbsp;'+merchants[i].slogan+'<br>' +
                '</div></div></div></a>'
            $("#merchants").append(colDiv);
        }
    }
    function getData(method,url,data,headers){
        $.ajax({
            type: method,
            url: url,
            dataType:"json",
            data: {currentPage:currentPage,
                pageSize:pageSize},
            success: function(data){
                renderTable(data.dataList);
            }
        });
    }
    getData(method,url,null,headers);
}
=======
    <nav aria-label="...">
        <ul class="pagination" id="navul">
            <li class="disabled"><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
            <li class="active"><a href="#">1 </a></li>
            ...
        </ul>
    </nav>
</div>
</body>
<script>
    let currentPage = 0;
    let pageSize = 8;
    window.onload=function () {
        let url="http://localhost:8081/typhoon_consuemer/showRestaurants";
        let method="POST";
        let headers=[{"key":"Content-Type","value":"application/json"}];
        function renderTable(merchants) {
            $("#merchants").empty();
            for(let i=0;i<merchants.length;i++){

                let colDiv='<a href="/typhoon_consuemer/html/merchantFood.html?shop_id='+merchants[i].shopId+'">' +
                    '<div class="col-md-3"><div id="merchant"><br><br><div class="merchantImg">' +
                    ' <img src="'+merchants[i].picture+'" alt="" width="180" height="100">' +
                    '</div><br><div class="merchantDetail">' +
                    ' &nbsp;&nbsp;'+merchants[i].shopName+'<br> &nbsp;&nbsp;'+merchants[i].slogan+'<br>' +
                    '</div></div></div></a>'
                $("#merchants").append(colDiv);
            }
        }
        function renderNav(page){
            $("#navul").empty();
            //上一页按钮
            let firstLi = ' <li><a href="#" aria-label="Previous" id="preNav"><span aria-hidden="true">&laquo;</span></a></li>';
            $("#navul").append(firstLi);
            for(let i=0;i<page.totalPage;i++){
                let status = '';
                if(page.currentPage==i){
                    status = 'active';
                }
                let navHtml = '<li class="'+status+'"><a href="#" id="page'+i+'">'+(i+1)+'<span class="sr-only">(current)</span></a></li>';
                $("#navul").append(navHtml);
            //绑定事件
                $("#page"+i).on('click',function () {
                    currentPage = i;
                    getData(method,url,null,headers);
                });
            }
            //下一页按钮
            let nextLi = '<li><a href="#" aria-label="Next" id="nextNav"><span aria-hidden="true">»</span></a></li>';
            $("#navul").append(nextLi);
            //为上下页绑定事件
            $("#nextNav").on('click',function () {
                currentPage = currentPage+1;
                getData(method,url,null,headers);
            });
            $("#preNav").on('click',function () {
                if(currentPage>0){currentPage = currentPage-1;}
                getData(method,url,null,headers);
            });
        }

        function getData(method,url,data,headers){
            $.ajax({
                type: method,
                url: url,
                dataType:"json",
                data: {currentPage:currentPage,
                    pageSize:pageSize},
                success: function(data){
                    renderTable(data.dataList);
                    renderNav(data);
                }
            });
        }
        getData(method,url,null,headers);

        $.ajax({
            type: "GET",
            url: "/typhoon_consuemer/getAdvertisement",
            dataType: "json",
            success: function(data){
                console.log(data);
            }
        });
    }
>>>>>>> b42136fd6670c8b70aa3ed0af8ef07ca2d8075b2

</script>
</html>